<!DOCTYPE html>
<!-- saved from url=(0065)http://www.p-8032.com/alipay?orderno=2023030617223585012481148757 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>支付宝</title>
    <link rel="stylesheet" type="text/css" href="./index_files/alipay.css">
   
    <!-- <script src="./index_files/jquery-1.8.2.min.js"></script>

    <script src="./index_files/layer.js" type="text/javascript"></script> -->
    <link rel="stylesheet" href="./index_files/layer.css" id="layuicss-layer">
<style>
    em{
        font-size: .16rem;
        color:red;;
        font-weight: bold;
        font-style: normal;
    }
</style></head>

<body>
<div class="am-message result" style="margin: 0;padding: .15rem .15rem .15rem .15rem;">
    <i class="am-icon result pay" id="icon"></i>
    <div class="am-message-main" id="alipay_text">支付宝</div>
    <div class="am-message-main" id="qrcode_box">
        <div class="qrcode">
            <img class="logo-sm" src="./index_files/logo-alipay2.jpg" id="logo" style="display: none;">
            <img src="" id="qrcode">
            <div  style="display: none;"><canvas id="canvas"  width="200" height="200"></canvas></div>
        </div>
    </div>
    <div class="am-message-sub"><em id="minute">0</em> 分 <em id="second">0</em> 秒</div>
</div>
<div class="am-list" style="display:none; padding: 0rem 0rem 0rem 0rem">
    <div class="am-list-body">
        <div class="am-list-item">
            <div class="am-list-content">订单金额：</div>
            <div class="am-list-extra" style="color: red;">
                <strong>¥<span>0.00</span></strong>
            </div>
        </div>
    </div>
</div>
<div class="am-list">
    <div class="am-list-body">
        <div class="am-list-item">
            <div class="am-list-content"  id="balance" style="min-width: 2.3rem;color: red; font-weight: bold;">金额：0.00</div>
            <div class="am-list-extra">
                <button class="am-button blue copy_pay_amount" id='copy_pay_amount' style="font-size: 16px; width: .6rem; border-color: #FF7E39; background: #FF9149;" data-clipboard-text="1000.00">复制</button>
            </div>
        </div>
    </div>
</div>
<div class="am-list" style="padding: 0rem;">
    <div class="am-list-body">
        <div class="am-list-item">
            <div class="am-list-content" id="txt_account" style="min-width: 2.3rem">账户：</div>
            <div class="am-list-extra">
                <button class="am-button blue copy_account" id="copy_account" style="font-size: 16px; width: .6rem;border-color: #FF7E39; background: #FF9149;" data-clipboard-text="">复制</button>
            </div>
        </div>
    </div>
</div>
<div class="am-list" style="padding: 0rem;">
    <div class="am-list-body">
        <div class="am-list-item">
            <div class="am-list-content" id="txt_name"  style="min-width: 2.3rem">姓名：</div>
            <div class="am-list-extra">
                <button class="am-button blue copy_account_name" id="copy_account_name" style="font-size: 16px; width: .6rem;border-color: #FF7E39; background: #FF9149;" data-clipboard-text="">复制</button>
            </div>
        </div>
    </div>
</div>
<div class="am-button-wrap" style="padding-top: .1rem; padding-bottom: .1rem;" id="pay_btn">
    <a href="" id="alipay_payurl"><button class="am-button blue">点击打开支付宝APP支付</button></a>
</div>
<div class="am-message result" style="margin: 0;padding: 0 .16rem; padding-bottom: .1rem;">
    <div class="am-message-main" style="text-align: left; font-size: 16px;">
        <span style="color: blue; font-weight: bold;">推荐使用：</span><br>
        1. 打开支付宝 -&gt; 转账 -&gt; 转到支付宝账户<br>
        2. 复制以上 支付宝账户，粘贴对应填入<br>
        3. 点击下一步，进行支付
    </div>
</div>
<script src="./index_files/clipboard.min.js"></script>

<script type="text/javascript" src="/utils/jq.js?v=v2"></script>
<script type="text/javascript" src="/utils/comm.js?v=v2"></script>
<script type="text/javascript" src="/utils/layer.min.js"></script>
<script type="text/javascript" src="/utils/jsencrypt.min.js?v=22"></script>
<script type="text/javascript" src="/utils/axios.min.js"></script>
<script type="text/javascript" src="/utils/moment.js"></script>
<!-- <script type="text/javascript" src="/utils/qrcodejs/qrcode.min.js"></script> -->


<script src="./index_files/jquery.qrcode.min.js"></script> 

<script type="text/javascript">

    var url="/pub/share/query"
    var setname="/pub/share/name"

    // url="http://192.168.3.189:8080/pub/share/query"
    // setname="http://192.168.3.189:8080/pub/share/name"

    function getQueryString(name) {
    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
    var r = window.location.search.substr(1).match(reg);
    if (r != null) {
    return unescape(r[2]);
    }
    return null;
    }



    var copy_pay_amount = new ClipboardJS('.copy_pay_amount');
    copy_pay_amount.on('success', function(e) {
  
        layer.msg("已复制成功： " + e.text);
    });
    var copy_account = new ClipboardJS('.copy_account');
    copy_account.on('success', function(e) {
        layer.msg("已复制成功： " + e.text);
    });


    var copy_account_name = new ClipboardJS('.copy_account_name');
    copy_account_name.on('success', function(e) {
        layer.msg("已复制成功： " + e.text);
        //layer.msg("支付宝姓名，复制成功 " + e.text);
    });

    function isMobile() {
        var userAgentInfo = navigator.userAgent;
        var mobileAgents = [ "Android", "iPhone", "SymbianOS", "Windows Phone", "iPad","iPod"];
        var mobile_flag = false;
        //根据userAgent判断是否是手机
        for (var v = 0; v < mobileAgents.length; v++) {
            if (userAgentInfo.indexOf(mobileAgents[v]) > 0) {
                mobile_flag = true;
                break;
            }
        }
        var screen_width = window.screen.width;
        var screen_height = window.screen.height;
        //根据屏幕分辨率判断是否是手机
        if(screen_width < 500 && screen_height < 800){
            mobile_flag = true;
        }
        return mobile_flag;
    }

    function mobileAgentsName(mobileAgentsName) {
        var userAgentInfo = navigator.userAgent;
        //var mobileAgents = [ "Android", "iPhone", "SymbianOS", "Windows Phone", "iPad","iPod"];
        var mobile_flag = false;
        //根据userAgent判断是否是手机
        if (userAgentInfo.indexOf(mobileAgentsName) > 0) {
            mobile_flag = true;
        }
        return mobile_flag;
    }


    
   
    $(function(){

 

        var intDiff = parseInt(180); //倒计时总秒数量
    
        function timer(intDiff){
            window.setInterval(function(){
                var day=0,
                    hour=0,
                    minute=0,
                    second=0;//时间默认值
                if(intDiff > 0){
                    day = Math.floor(intDiff / (60 * 60 * 24));
                    hour = Math.floor(intDiff / (60 * 60)) - (day * 24);
                    minute = Math.floor(intDiff / 60) - (day * 24 * 60) - (hour * 60);
                    second = Math.floor(intDiff) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60);

                    if(minute ==0 && second ==0){
                        getstatus();
                        clearInterval(timer);
                    }
                }
                if (minute <= 9) minute = '0' + minute;
                if (second <= 9) second = '0' + second;
                $('#minute').html(minute);
                $('#second').html(second);
                intDiff--;
            }, 1000);
        }


        comm.post({url:url,data:{out_trade_no:getQueryString('out_trade_no')},callback:function(data){

            data=data.data
            intDiff=moment(data.expire_at).diff(moment(), 'seconds')
            if(intDiff>0){


            var canvas = $("#canvas").qrcode({
                width: 200,
                height:200,
                text: data.file
            }).hide();
            var canvas = canvas.find('canvas').get(0);

            $('#qrcode').attr('src',canvas.toDataURL('image/jpg'))  

                timer(intDiff);
                $('#alipay_payurl').attr('href',data.file)
            }else{

               $('#qrcode').prop('src',"/alipay/expire.png");

                        // layer.alert("支付时间已过期", {icon: 2,closeBtn: 0},function(){
                        //     closeWindow();
                        // });
            }



            



            //$('#qrcode').prop('src',canvas.toDataURL('image/png'));

            
           
            
            $('#copy_account').attr('data-clipboard-text',data.receive_account)
            $('#copy_account_name').attr('data-clipboard-text',data.receive_name)
            $('#copy_pay_amount').attr('data-clipboard-text',parseFloat(data.amount).toFixed(2))
            
                //$('#out_trade_no').text(getQueryString('out_trade_no'))
                $("#balance").html(`金额：${parseFloat(data.amount).toFixed(2)}`)
                $("#txt_account").html(`账户：${data.receive_account}`)
                $("#txt_name").html(`姓名：${data.receive_name}`)
    

        }})
        
        function closeWindow()
        {
            window.opener = null;
            window.open(' ', '_self', ' ');
            window.close();
        }
     
    })
</script>


</body></html>