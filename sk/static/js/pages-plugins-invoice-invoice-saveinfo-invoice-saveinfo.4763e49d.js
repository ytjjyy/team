(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plugins-invoice-invoice-saveinfo-invoice-saveinfo"],{"1e22":function(t,a,i){"use strict";i.r(a);var e=i("644f"),n=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(s);a["default"]=n.a},"2fa6":function(t,a,i){var e=i("24fb");a=e(!1),a.push([t.i,".no-data-box[data-v-9455811c]{padding:10% 0;text-align:center}.no-data-box uni-image[data-v-9455811c]{width:%?160?%;margin-bottom:%?30?%}.no-data-box .no-data-tips[data-v-9455811c]{font-size:%?28?%;color:#a6a6a6}.no-data-loading uni-text[data-v-9455811c]{color:#999}",""]),t.exports=a},"382f":function(t,a,i){var e=i("2fa6");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("4f06").default;n("c08120bc",e,!0,{sourceMap:!1,shadowMode:!1})},"4fed":function(t,a,i){"use strict";i.d(a,"b",(function(){return e})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){}));var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",[1==t.propStatus?i("v-uni-view",{staticClass:"no-data-box no-data-loading"},[i("v-uni-text",[t._v("加载中...")])],1):2==t.propStatus?i("v-uni-view",{staticClass:"no-data-box"},[i("v-uni-image",{attrs:{src:t.static_dir+"error.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"no-data-tips"},[t._v(t._s(t.propMsg||"处理错误"))])],1):0==t.propStatus?i("v-uni-view",{staticClass:"no-data-box"},[i("v-uni-image",{attrs:{src:t.static_dir+"empty.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"no-data-tips"},[t._v(t._s(t.propMsg||"没有相关数据"))])],1):t._e()],1)},n=[]},"644f":function(t,a,i){"use strict";i("7a82");var e=i("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("c975"),i("14d9");var n=e(i("97c7")),s=getApp(),o={data:function(){return{params:null,form_submit_loading:!1,data_list_loding_status:1,data_list_loding_msg:"",data_bottom_line_status:!1,data_base:null,apply_type_list:[],can_invoice_type_list:[],invoice_content_list:[],save_base_data:null,data:null,form_invoice_type_index:0,form_apply_type_index:0,form_invoice_content_index:0,form_apply_type_disabled:!1,company_container:!1,company_special_container:!1,addressee_container:!1,email_container:!0}},components:{componentNoData:n.default},props:{},onLoad:function(t){this.setData({params:t}),this.init()},onReady:function(){uni.setNavigationBarTitle({title:"开票"+(null==(this.params.id||null)?"添加":"编辑")})},onShow:function(){s.globalData.page_share_handle()},onPullDownRefresh:function(){this.init()},methods:{init:function(){var t=this;uni.showLoading({title:"加载中..."}),this.setData({data_list_loding_status:1}),uni.request({url:s.globalData.get_request_url("saveinfo","user","invoice"),method:"POST",data:this.params,dataType:"json",success:function(a){if(uni.hideLoading(),uni.stopPullDownRefresh(),0==a.data.code){var i=a.data.data,e={data_base:i.base||null,apply_type_list:i.apply_type_list||[],can_invoice_type_list:i.can_invoice_type_list||[],invoice_content_list:i.invoice_content_list||[],save_base_data:i.save_base_data,data:null==(i.data||null)||0==i.data.length?null:i.data,data_list_loding_status:0,data_bottom_line_status:!0,data_list_loding_msg:i.save_base_data.total_price<=0?"发票金额必须大于0":""};if(null!=e.data){var n=e.invoice_content_list.indexOf(e.data.invoice_content);e["form_invoice_type_index"]=e.data.invoice_type,e["form_apply_type_index"]=e.data.apply_type,e["form_invoice_content_index"]=-1==n?0:n,e["form_apply_type_disabled"]=1==e.data.apply_type}t.setData(e),t.invoice_container_handle()}else t.setData({data_list_loding_status:2,data_bottom_line_status:!1,data_list_loding_msg:a.data.msg}),s.globalData.is_login_check(a.data,t,"init")&&s.globalData.showToast(a.data.msg)},fail:function(){uni.hideLoading(),uni.stopPullDownRefresh(),t.setData({data_list_loding_status:2,data_bottom_line_status:!1,data_list_loding_msg:"服务器请求出错"}),s.globalData.showToast("服务器请求出错")}})},form_invoice_type_event:function(t){this.setData({form_invoice_type_index:t.detail.value}),this.invoice_container_handle()},form_apply_type_event:function(t){this.setData({form_apply_type_index:t.detail.value}),this.invoice_container_handle()},form_invoice_content_event:function(t){this.setData({form_invoice_content_index:t.detail.value})},invoice_container_handle:function(){var t=this.can_invoice_type_list[this.form_invoice_type_index]["id"];switch(2==t?this.setData({form_apply_type_index:1,form_apply_type_disabled:!0}):this.setData({form_apply_type_disabled:!1}),t){case 0:this.setData({company_special_container:!1,addressee_container:!1,email_container:!0});break;case 1:this.setData({company_special_container:!1,addressee_container:!0,email_container:!1});break;case 2:this.setData({company_container:!0,company_special_container:!0,addressee_container:!0,email_container:!1});break}if(2!=t){var a=this.apply_type_list[this.form_apply_type_index]["id"];this.setData({company_container:0!=a})}},formSubmit:function(t){var a=this,i=t.detail.value;null==(this.data||null)?(i["ids"]=this.params.ids||"",i["type"]=this.params.type||""):i["id"]=this.data.id;var e=[{fields:"invoice_type",msg:"请选择发票类型",is_can_zero:1},{fields:"apply_type",msg:"请选择申请类型",is_can_zero:1},{fields:"invoice_title",msg:"请填写发票抬头、最多200个字符"}];if(s.globalData.fields_check(i,e)){var n=this.can_invoice_type_list[this.form_invoice_type_index]["id"],o=this.apply_type_list[this.form_apply_type_index]["id"];1==o&&e.push({fields:"invoice_code",msg:"请填写企业统一社会信用代码或纳税识别号、最多160个字符"}),2==n&&(e.push({fields:"invoice_bank",msg:"请填写企业开户行名称、最多200个字符"}),e.push({fields:"invoice_account",msg:"请填写企业开户帐号、最多160个字符"}),e.push({fields:"invoice_tel",msg:"请填写企业联系电话 6~15 个字符"}),e.push({fields:"invoice_address",msg:"请填写企业注册地址、最多230个字符"})),0!=n&&(e.push({fields:"name",msg:"请填写收件人姓名格式 2~30 个字符之间"}),e.push({fields:"tel",msg:"请填写收件人电话 6~15 个字符"}),e.push({fields:"address",msg:"请填写收件人地址、最多230个字符"})),s.globalData.fields_check(i,e)&&(i["invoice_type"]=this.can_invoice_type_list[this.form_invoice_type_index]["id"],this.invoice_content_list.length>0&&void 0!=this.invoice_content_list[this.form_invoice_content_index]&&(i["invoice_content"]=this.invoice_content_list[this.form_invoice_content_index]),uni.showLoading({title:"提交中..."}),this.setData({form_submit_loading:!0}),uni.request({url:s.globalData.get_request_url("save","user","invoice"),method:"POST",data:i,dataType:"json",success:function(t){if(uni.hideLoading(),0==t.data.code){s.globalData.showToast(t.data.msg,"success");var i=null!=(a.params||null)&&1==(a.params.is_redirect||0);setTimeout((function(){i?uni.redirectTo({url:"/pages/plugins/invoice/invoice/invoice"}):uni.navigateBack()}),2e3)}else a.setData({form_submit_loading:!1}),s.globalData.is_login_check(t.data)?s.globalData.showToast(t.data.msg):s.globalData.showToast("提交失败，请重试！")},fail:function(){uni.hideLoading(),a.setData({form_submit_loading:!1}),s.globalData.showToast("服务器请求出错")}}))}}}};a.default=o},"97c7":function(t,a,i){"use strict";i.r(a);var e=i("4fed"),n=i("aff5");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(s);i("a9750");var o=i("f0c5"),l=Object(o["a"])(n["default"],e["b"],e["c"],!1,null,"9455811c",null,!1,e["a"],void 0);a["default"]=l.exports},a9750:function(t,a,i){"use strict";var e=i("382f"),n=i.n(e);n.a},aff5:function(t,a,i){"use strict";i.r(a);var e=i("eba1"),n=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(s);a["default"]=n.a},b683:function(t,a,i){"use strict";i.r(a);var e=i("ff11"),n=i("1e22");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(s);var o=i("f0c5"),l=Object(o["a"])(n["default"],e["b"],e["c"],!1,null,"33536190",null,!1,e["a"],void 0);a["default"]=l.exports},eba1:function(t,a,i){"use strict";i("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("a9e3");getApp();var e={data:function(){return{static_dir:"/static/images/common/"}},components:{},props:{propStatus:{type:[Number,String],default:0},propMsg:{type:String,default:"没有相关数据"}},methods:{}};a.default=e},ff11:function(t,a,i){"use strict";i.d(a,"b",(function(){return e})),i.d(a,"c",(function(){return n})),i.d(a,"a",(function(){}));var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"page-bottom-fixed"},[null!=t.save_base_data&&t.save_base_data.total_price>0?i("v-uni-view",[i("v-uni-form",{staticClass:"form-container",on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.formSubmit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"padding-main oh"},[i("v-uni-view",{staticClass:"padding-main border-radius-main bg-white spacing-mb"},[i("v-uni-text",{staticClass:"cr-base margin-right-sm"},[t._v("发票金额")]),i("v-uni-text",{staticClass:"cr-main text-size fw-b"},[t._v(t._s(t.save_base_data.total_price))]),i("v-uni-text",{staticClass:"cr-grey margin-left-sm"},[t._v("元")])],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("发票类型"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("必选")])],1),i("v-uni-picker",{attrs:{name:"invoice_type",value:t.form_invoice_type_index,range:t.can_invoice_type_list,"range-key":"name"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.form_invoice_type_event.apply(void 0,arguments)}}},[i("v-uni-view",{class:"picker "+(void 0==t.can_invoice_type_list[t.form_invoice_type_index]?"cr-grey":"cr-base")+" arrow-right"},[t._v(t._s(void 0==t.can_invoice_type_list[t.form_invoice_type_index]?"请选择发票类型":t.can_invoice_type_list[t.form_invoice_type_index]["name"]))])],1)],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("申请类型"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("必选")])],1),i("v-uni-picker",{attrs:{name:"apply_type",disabled:t.form_apply_type_disabled,value:t.form_apply_type_index,range:t.apply_type_list,"range-key":"name"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.form_apply_type_event.apply(void 0,arguments)}}},[i("v-uni-view",{class:"picker "+(void 0==t.apply_type_list[t.form_apply_type_index]?"cr-grey":"cr-base")+" arrow-right"},[t._v(t._s(void 0==t.apply_type_list[t.form_apply_type_index]?"请选择申请类型":t.apply_type_list[t.form_apply_type_index]["name"]))])],1)],1),t.invoice_content_list.length>0?i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("发票内容"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("必选")])],1),i("v-uni-picker",{attrs:{name:"invoice_content",value:t.form_invoice_content_index,range:t.invoice_content_list},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.form_invoice_content_event.apply(void 0,arguments)}}},[i("v-uni-view",{class:"picker "+(void 0==t.invoice_content_list[t.form_invoice_content_index]?"cr-grey":"cr-base")+" arrow-right"},[t._v(t._s(void 0==t.invoice_content_list[t.form_invoice_content_index]?"请选择发票内容":t.invoice_content_list[t.form_invoice_content_index]))])],1)],1):t._e(),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("发票抬头"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_title","placeholder-class":"cr-grey",placeholder:"发票抬头、最多200个字符",maxlength:"200",value:t.data.invoice_title||""}})],1),t.company_container?i("v-uni-view",[i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("企业统一社会信用代码或纳税识别号"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_code","placeholder-class":"cr-grey",placeholder:"企业统一社会信用代码或纳税识别号、最多160个字符",maxlength:"160",value:t.data.invoice_code||""}})],1)],1):t._e(),t.company_special_container?i("v-uni-view",[i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("企业开户行名称"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_bank","placeholder-class":"cr-grey",placeholder:"企业开户行名称、最多200个字符",maxlength:"200",value:t.data.invoice_bank||""}})],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("企业开户帐号"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_account","placeholder-class":"cr-grey",placeholder:"企业开户帐号、最多160个字符",maxlength:"160",value:t.data.invoice_account||""}})],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("企业联系电话"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_tel","placeholder-class":"cr-grey",placeholder:"企业联系电话 6~15 个字符",maxlength:"15",value:t.data.invoice_tel||""}})],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("企业注册地址"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"invoice_address","placeholder-class":"cr-grey",placeholder:"企业注册地址、最多230个字符",maxlength:"230",value:t.data.invoice_address||""}})],1)],1):t._e(),t.addressee_container?i("v-uni-view",[i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("收件人姓名"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"name","placeholder-class":"cr-grey",placeholder:"收件人姓名格式 2~30 个字符之间",maxlength:"30",value:t.data.name||""}})],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("收件人电话"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"tel","placeholder-class":"cr-grey",placeholder:"收件人电话 6~15 个字符",maxlength:"15",value:t.data.tel||""}})],1),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("收件人地址"),i("v-uni-text",{staticClass:"form-group-tips-must"},[t._v("*")])],1),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"address","placeholder-class":"cr-grey",placeholder:"收件人地址、最多230个字符",maxlength:"230",value:t.data.address||""}})],1)],1):t._e(),t.email_container?i("v-uni-view",[i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("电子邮箱")]),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"email","placeholder-class":"cr-grey",placeholder:"电子邮箱、最多60个字符",maxlength:"60",value:t.data.email||""}})],1)],1):t._e(),i("v-uni-view",{staticClass:"form-gorup"},[i("v-uni-view",{staticClass:"form-gorup-title"},[t._v("备注")]),i("v-uni-input",{staticClass:"cr-base",attrs:{type:"text",name:"user_note","placeholder-class":"cr-grey",placeholder:"备注最多230个字符",maxlength:"60",value:t.data.user_note||""}})],1),i("v-uni-view",{staticClass:"bottom-fixed padding-main"},[i("v-uni-button",{staticClass:"bg-main br-main cr-white round text-size",attrs:{type:"default","form-type":"submit","hover-class":"none",loading:t.form_submit_loading,disabled:t.form_submit_loading}},[t._v("提交")])],1)],1)],1)],1):i("v-uni-view",[i("component-no-data",{attrs:{propStatus:t.data_list_loding_status,propMsg:t.data_list_loding_msg}})],1)],1)},n=[]}}]);