(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-order-comments-user-order-comments"],{"2fa6":function(t,a,i){var n=i("24fb");a=n(!1),a.push([t.i,".no-data-box[data-v-9455811c]{padding:10% 0;text-align:center}.no-data-box uni-image[data-v-9455811c]{width:%?160?%;margin-bottom:%?30?%}.no-data-box .no-data-tips[data-v-9455811c]{font-size:%?28?%;color:#a6a6a6}.no-data-loading uni-text[data-v-9455811c]{color:#999}",""]),t.exports=a},3174:function(t,a,i){"use strict";i.r(a);var n=i("ae53"),e=i("8e69");for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(o);i("361d");var s=i("f0c5"),r=Object(s["a"])(e["default"],n["b"],n["c"],!1,null,"aa9399c8",null,!1,n["a"],void 0);a["default"]=r.exports},"361d":function(t,a,i){"use strict";var n=i("bb0f"),e=i.n(n);e.a},"382f":function(t,a,i){var n=i("2fa6");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("c08120bc",n,!0,{sourceMap:!1,shadowMode:!1})},"4fed":function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return e})),i.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",[1==t.propStatus?i("v-uni-view",{staticClass:"no-data-box no-data-loading"},[i("v-uni-text",[t._v("加载中...")])],1):2==t.propStatus?i("v-uni-view",{staticClass:"no-data-box"},[i("v-uni-image",{attrs:{src:t.static_dir+"error.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"no-data-tips"},[t._v(t._s(t.propMsg||"处理错误"))])],1):0==t.propStatus?i("v-uni-view",{staticClass:"no-data-box"},[i("v-uni-image",{attrs:{src:t.static_dir+"empty.png",mode:"widthFix"}}),i("v-uni-view",{staticClass:"no-data-tips"},[t._v(t._s(t.propMsg||"没有相关数据"))])],1):t._e()],1)},e=[]},6538:function(t,a,i){"use strict";var n=i("72b3"),e=i.n(n);e.a},6637:function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return e})),i.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",[i("v-uni-view",{staticClass:"padding-main"},[null!=t.detail?i("v-uni-view",[i("v-uni-form",{staticClass:"form-container",on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.formSubmit.apply(void 0,arguments)}}},[t._l(t.detail.items,(function(a,n){return i("v-uni-view",{key:n,staticClass:"form-gorup oh"},[i("v-uni-view",{staticClass:"oh"},[i("v-uni-navigator",{attrs:{url:a.goods_url,"hover-class":"none"}},[i("v-uni-image",{staticClass:"goods-image fl radius br margin-right-lg",attrs:{src:a.images,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"item-base fl margin-top-sm"},[t._l([1,2,3,4,5],(function(a,e){return[i("v-uni-image",{key:e+"_0",staticClass:"xingxing-icon va-m",attrs:{src:t.common_static_url+"stars"+(void 0!=t.form_rating_list[n]&&t.form_rating_list[n]>=a?"-active":"")+"-icon.png",mode:"aspectFill","data-index":n,"data-value":a},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.rating_event.apply(void 0,arguments)}}})]})),void 0!=t.form_rating_list[n]?i("v-uni-text",{staticClass:"cr-gray va-m margin-left-lg"},[t._v(t._s(t.rating_msg[t.form_rating_list[n]-1]))]):t._e()],2)],1),i("v-uni-view",{staticClass:"margin-top-main br-t"},[i("v-uni-textarea",{staticClass:"cr-base",attrs:{"data-index":n,"placeholder-class":"cr-grey",placeholder:"宝贝满足你的期待吗？说说它的优点和美中不足的地方吧",maxlength:"230"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.form_content_event.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"form-container-upload oh"},[i("v-uni-view",{staticClass:"form-upload-data fl"},[null!=(t.form_images_list[n]||null)&&t.form_images_list[n].length>0?t._l(t.form_images_list[n],(function(a,e){return i("v-uni-view",{key:e,staticClass:"item fl"},[i("v-uni-text",{staticClass:"delete-icon",attrs:{"data-index":n,"data-ix":e},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.upload_delete_event.apply(void 0,arguments)}}},[t._v("x")]),i("v-uni-image",{staticClass:"padding-xs dis-block",attrs:{src:a,"data-index":n,"data-ix":e,mode:"aspectFill"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.upload_show_event.apply(void 0,arguments)}}})],1)})):t._e()],2),null==(t.form_images_list[n]||null)||t.form_images_list[n].length<3?i("v-uni-image",{staticClass:"upload-icon",attrs:{src:t.common_static_url+"upload-icon.png",mode:"aspectFill","data-index":n},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.file_upload_event.apply(void 0,arguments)}}}):t._e()],1)],1)],1)})),i("v-uni-view",{staticClass:"form-gorup anonymous"},[i("v-uni-switch",{staticClass:"va-m",attrs:{name:"is_anonymous"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.anonymous_event.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"cr-base va-m"},[t._v("匿名")]),i("v-uni-text",{staticClass:"fr cr-gray margin-top-lg"},[t._v(t._s(t.anonymous_msg_list[t.anonymous_value]))])],1),i("v-uni-view",{staticClass:"form-gorup form-gorup-submit"},[i("v-uni-button",{staticClass:"bg-main br-main cr-white round text-size",attrs:{"form-type":"submit",type:"default","hover-class":"none",disabled:t.form_button_disabled}},[t._v("提交")])],1)],2)],1):i("v-uni-view",[i("component-no-data",{attrs:{propStatus:t.data_list_loding_status,propMsg:t.data_list_loding_msg}})],1)],1)],1)},e=[]},"66fd":function(t,a,i){var n=i("24fb");a=n(!1),a.push([t.i,".data-bottom-line[data-v-aa9399c8]{padding:%?40?%;overflow:hidden}.data-bottom-line uni-view[data-v-aa9399c8]{width:33.3%}.data-bottom-line .left[data-v-aa9399c8],\n.data-bottom-line .right[data-v-aa9399c8]{margin-top:8px;border-bottom:1px solid #e1e1e1}.data-bottom-line .msg[data-v-aa9399c8]{color:#999;text-align:center;font-size:%?24?%}.data-bottom-line .left[data-v-aa9399c8],\n.data-bottom-line .msg[data-v-aa9399c8]{float:left}.data-bottom-line .right[data-v-aa9399c8]{float:right}",""]),t.exports=a},"72b3":function(t,a,i){var n=i("b08f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("5d3e54de",n,!0,{sourceMap:!1,shadowMode:!1})},"870b":function(t,a,i){"use strict";i("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{}},components:{},props:{propStatus:Boolean,propMsg:String},methods:{}};a.default=n},"8a95":function(t,a,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=n(i("53ca"));i("a434"),i("14d9"),i("e9c4"),i("d81d");var o=n(i("97c7")),s=n(i("3174")),r=getApp(),l=r.globalData.get_static_url("common"),u={data:function(){return{common_static_url:l,data_list_loding_status:1,data_list_loding_msg:"",params:null,detail:null,editor_path_type:"",rating_msg:["非常差","差","一般","好","非常好"],anonymous_value:0,anonymous_msg_list:["你写的评论会以匿名的形式展现","你写的评论会以昵称的形式展现"],form_rating_list:[],form_images_list:[],form_content_list:[],form_button_disabled:!1}},components:{componentNoData:o.default,componentBottomLine:s.default},props:{},onLoad:function(t){this.setData({params:t})},onShow:function(){this.init(),r.globalData.page_share_handle()},onPullDownRefresh:function(){this.init()},methods:{init:function(){var t=this;uni.showLoading({title:"加载中..."}),this.setData({data_list_loding_status:1}),uni.request({url:r.globalData.get_request_url("comments","order"),method:"POST",data:{id:this.params.id},dataType:"json",success:function(a){if(uni.hideLoading(),uni.stopPullDownRefresh(),0==a.data.code){var i=a.data.data;t.setData({editor_path_type:i.editor_path_type||"",detail:i.data,data_list_loding_status:3,data_list_loding_msg:""})}else t.setData({data_list_loding_status:2,data_list_loding_msg:a.data.msg}),r.globalData.is_login_check(a.data,t,"init")&&r.globalData.showToast(a.data.msg)},fail:function(){uni.hideLoading(),uni.stopPullDownRefresh(),t.setData({data_list_loding_status:2,data_list_loding_msg:"服务器请求出错"}),r.globalData.showToast("服务器请求出错")}})},upload_show_event:function(t){var a=t.currentTarget.dataset.index,i=t.currentTarget.dataset.ix;uni.previewImage({current:this.form_images_list[a][i],urls:this.form_images_list[a]})},upload_delete_event:function(t){var a=t.currentTarget.dataset.index,i=t.currentTarget.dataset.ix,n=this;uni.showModal({title:"温馨提示",content:"删除后不可恢复、继续吗？",success:function(t){if(t.confirm){var e=n.form_images_list;e[a].splice(i,1),n.setData({form_images_list:e})}}})},file_upload_event:function(t){for(var a=t.currentTarget.dataset.index,i=this.form_images_list,n=this.detail.items.length,e=0;e<n;e++)void 0==i[e]&&(i[e]=[]);this.setData({form_images_list:i});var o=this;uni.chooseImage({count:3,success:function(t){var i=t.tempFilePaths.length;o.upload_one_by_one(a,t.tempFilePaths,0,0,0,i)}})},upload_one_by_one:function(t,a,i,n,o,s){var l=this;(null==(l.form_images_list[t]||null)||l.form_images_list[t].length<3)&&uni.uploadFile({url:r.globalData.get_request_url("index","ueditor"),filePath:a[o],name:"upfile",formData:{action:"uploadimage",path_type:l.editor_path_type},success:function(a){if(i++,200==a.statusCode){var n="object"==(0,e.default)(a.data)?a.data:JSON.parse(a.data);if(0==n.code&&null!=(n.data.url||null)){var o=l.form_images_list;null==(o[t]||null)&&(o[t]=[]),o[t].push(n.data.url),l.setData({form_images_list:o})}else r.globalData.showToast(n.msg)}},fail:function(t){n++},complete:function(e){o++,o>=s||l.upload_one_by_one(t,a,i,n,o,s)}})},anonymous_event:function(t){this.setData({anonymous_value:1==t.detail.value?1:0})},rating_event:function(t){for(var a=t.currentTarget.dataset.index,i=t.currentTarget.dataset.value,n=this.form_rating_list,e=this.detail.items.length,o=0;o<e;o++)void 0==n[o]&&(n[o]=0),a==o&&(n[o]=i);this.setData({form_rating_list:n})},form_content_event:function(t){for(var a=t.currentTarget.dataset.index,i=t.detail.value,n=this.form_content_list,e=this.detail.items.length,o=0;o<e;o++)void 0==n[o]&&(n[o]=""),a==o&&(n[o]=i);this.setData({form_content_list:n})},formSubmit:function(t){var a=this.detail.items.length,i=this.form_rating_list.length;if(i<a)return r.globalData.showToast("请先评分"),!1;var n=Math.max.apply(null,this.form_rating_list),e=Math.min.apply(null,this.form_rating_list);if(e<1||n>5)return r.globalData.showToast("还有未评分"),!1;i=this.form_content_list.length;if(i<a)return r.globalData.showToast("请填写评论内容"),!1;for(var o in this.form_content_list){i=this.form_content_list[o].length;if(i<6||i>230)return r.globalData.showToast("评论内容 6~230 个字符之间"),!1}if(this.form_images_list.length>0)for(var o in this.form_images_list)if(this.form_images_list[o].length>3)return r.globalData.showToast("每项评论图片不能超过3张"),!1;var s=t.detail.value;s["is_anonymous"]=1==s["is_anonymous"]?1:0,s["id"]=this.detail.id,s["goods_id"]=JSON.stringify(this.detail.items.map((function(t){return t.goods_id}))),s["rating"]=JSON.stringify(this.form_rating_list),s["content"]=JSON.stringify(this.form_content_list),s["images"]=this.form_images_list.length>0?JSON.stringify(this.form_images_list):"";var l=this;uni.showLoading({title:"处理中..."}),l.setData({form_button_disabled:!0}),uni.request({url:r.globalData.get_request_url("commentssave","order"),method:"POST",data:s,dataType:"json",success:function(t){uni.hideLoading(),0==t.data.code?(r.globalData.showToast(t.data.msg,"success"),setTimeout((function(){uni.navigateBack()}),2e3)):(l.setData({form_button_disabled:!1}),r.globalData.showToast(t.data.msg))},fail:function(){uni.hideLoading(),l.setData({form_button_disabled:!1}),r.globalData.showToast("服务器请求出错")}})}}};a.default=u},"8e69":function(t,a,i){"use strict";i.r(a);var n=i("870b"),e=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(o);a["default"]=e.a},"97c7":function(t,a,i){"use strict";i.r(a);var n=i("4fed"),e=i("aff5");for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(o);i("a9750");var s=i("f0c5"),r=Object(s["a"])(e["default"],n["b"],n["c"],!1,null,"9455811c",null,!1,n["a"],void 0);a["default"]=r.exports},a9750:function(t,a,i){"use strict";var n=i("382f"),e=i.n(n);e.a},ae53:function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return e})),i.d(a,"a",(function(){}));var n=function(){var t=this.$createElement,a=this._self._c||t;return a("v-uni-view",[this.propStatus?a("v-uni-view",{staticClass:"data-bottom-line"},[a("v-uni-view",{staticClass:"left"}),a("v-uni-view",{staticClass:"msg"},[this._v(this._s(this.propMsg||"我是有底线的"))]),a("v-uni-view",{staticClass:"right"})],1):this._e()],1)},e=[]},aff5:function(t,a,i){"use strict";i.r(a);var n=i("eba1"),e=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(o);a["default"]=e.a},b08f:function(t,a,i){var n=i("24fb");a=n(!1),a.push([t.i,".goods-image[data-v-18355247]{width:%?80?%;height:%?80?%}.item-base .xingxing-icon[data-v-18355247]{width:%?60?%;height:%?60?%;margin:0 %?15?%}.form-content uni-textarea[data-v-18355247]{height:%?160?%!important;min-height:%?160?%!important}.form-container-upload .form-upload-data uni-image[data-v-18355247]{width:%?100?%;height:%?100?%}.form-container-upload .upload-icon[data-v-18355247]{width:%?110?%;height:%?110?%}",""]),t.exports=a},bb0f:function(t,a,i){var n=i("66fd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("429ff98b",n,!0,{sourceMap:!1,shadowMode:!1})},c923:function(t,a,i){"use strict";i.r(a);var n=i("8a95"),e=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(o);a["default"]=e.a},cdaa:function(t,a,i){"use strict";i.r(a);var n=i("6637"),e=i("c923");for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(o);i("6538");var s=i("f0c5"),r=Object(s["a"])(e["default"],n["b"],n["c"],!1,null,"18355247",null,!1,n["a"],void 0);a["default"]=r.exports},eba1:function(t,a,i){"use strict";i("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("a9e3");getApp();var n={data:function(){return{static_dir:"/static/images/common/"}},components:{},props:{propStatus:{type:[Number,String],default:0},propMsg:{type:String,default:"没有相关数据"}},methods:{}};a.default=n}}]);